# backend-s3.tf.example
# S3 backend configuration for production/team environments
#
# Usage for S3 backend:
# 1. Create S3 bucket and DynamoDB table first:
#    aws s3 mb s3://your-terraform-state-bucket --region us-west-2
#    aws dynamodb create-table --table-name terraform-state-lock \
#      --attribute-definitions AttributeName=LockID,AttributeType=S \
#      --key-schema AttributeName=LockID,KeyType=HASH \
#      --billing-mode PAY_PER_REQUEST --region us-west-2
# 2. Create KMS key for encryption (optional but recommended)
# 3. Copy this file to backend-s3.tf and update values below
# 4. Remove backend-local.tf if it exists
# 5. Run: terraform init -reconfigure
#
# NOTE: The backend block in main.tf (lines 18-23) should be removed/commented
# when using this separate backend configuration file.

terraform {
  backend "s3" {
    # Replace with your actual S3 bucket name
    bucket = "your-terraform-state-bucket"
    
    # State file path within the bucket
    key = "nexora/terraform.tfstate"
    
    # AWS region where bucket is located
    region = "us-west-2"
    
    # DynamoDB table for state locking
    dynamodb_table = "terraform-state-lock"
    
    # Enable encryption at rest
    encrypt = true
    
    # Optional: KMS key ID for encryption (recommended for production)
    # kms_key_id = "arn:aws:kms:us-west-2:ACCOUNT_ID:key/KEY_ID"
    # or use alias:
    # kms_key_id = "alias/terraform-state-key"
  }
}
